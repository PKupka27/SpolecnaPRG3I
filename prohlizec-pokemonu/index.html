<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="author" content="ITnetwork.cz">
		<title>Prohlížeč pokémonů</title>

		<link rel="stylesheet" href="styles.css">
	</head>

	<body>
		<div id="poke-container">
			<div id="poke-seznam"></div>
			<div id="poke-detaily"></div>
		</div>

		<script>
			let apiUrl = "https://pokeapi.co/api/v2/";
			
			//toto stahne data ze serveru se kterymi pracujeme

			function stahniJSON(url, callback)
			{
				let xhr = new XMLHttpRequest();
				xhr.onload = () => {
					callback(JSON.parse(xhr.response));
				}
				xhr.open("GET", url);
				xhr.send();
			}
			
			// tento kod pošle dotaz na server a pak vypíše seznam pokemu do stránky

			function nactiSeznam(url)
			{
				let seznam_div = document.getElementById("poke-seznam");
				seznam_div.innerHTML = "<ul id='poke-seznam-ul'></ul>";
				let seznam_ul = document.getElementById("poke-seznam-ul");
			
				stahniJSON(url, (data) => {
					for (let pokemon of data.results)
					{
						let novaPolozka = document.createElement("li");
						novaPolozka.innerText = pokemon.name;
						seznam_ul.appendChild(novaPolozka);
						let poke_url = pokemon.url;
						novaPolozka.addEventListener("click", () => nactiPokemona(poke_url));
					}
				});
			}
			
			// tento kod nacte a vypise udaje o konkretnim pokemonovi, ktere jsme vybrali

			function nactiPokemona(url)
			{
				let detaily_div = document.getElementById("poke-detaily");
				stahniJSON(url, (data) => {
					let html = `
						<a>Normal:</a>
						<br>
						<img src="${data.sprites.front_default}" />
						<br>
						Shiny verze:
						<br>
						<img src="${data.sprites.front_shiny}"
						<ul>
							<li>Název: ${data.name}</li>
							<li>Výška: ${data.height}</li>
							<li>Váha: ${data.weight}</li>
						</ul>
					`;
			
					detaily_div.innerHTML = html;
				});
			}
			
			// zde uz voláme načtení seznamu

			nactiSeznam(apiUrl + "pokemon");
		</script>
	</body>
</html>